(()=>{"use strict";var e=function(e,t,o,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputError),r.textContent=o,r.classList.add(n.inputErrorMessage)},t=function(e,t,o){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(o.buttonDisabled)):(t.disabled=!0,t.classList.add(o.buttonDisabled))};function o(e,t){e?(t.removeAttribute("disabled"),t.classList.remove("buttons_disabled")):(t.setAttribute("disabled",!0),t.classList.add("buttons_disabled"))}function n(e){e.classList.remove("popup_opened"),e.removeEventListener("click",c),document.removeEventListener("keydown",u)}function r(e){e.classList.add("popup_opened"),e.addEventListener("click",c),document.addEventListener("keydown",u)}function c(e){e.target.closest(".popup__content")||n(e.target.closest(".popup"))}function u(e){"Escape"===e.key&&n(document.querySelector(".popup_opened"))}var i=document.querySelector(".elements-template").content,a=document.querySelector(".popup-images"),s=a.querySelector(".popup-images__title"),l=a.querySelector(".popup-images__image");function d(e,t,o,n){var c=i.querySelector(".elements__card").cloneNode(!0),u=c.querySelector(".elements__title"),d=c.querySelector(".elements__images");return c.querySelector(".elements__like-counter"),u.textContent=t,d.src=e,d.alt=t,c.querySelector(".elements__button-like").addEventListener("click",(function(e){e.target.classList.toggle("elements__button-like_active")})),c.querySelector(".elements__images").addEventListener("click",(function(){s.textContent=t,l.src=e,l.alt=t,r(a)})),c}function p(e,t){e.prepend(t)}i.querySelector(".elements__delete-icon");var m,_="334c15e0-83c8-4a19-a28c-1a17c1029344",f="plus-cohort-16",v=document.querySelector(".elements__cards"),y=document.querySelector(".profile"),S=y.querySelector(".profile__button-edit"),b=y.querySelector(".profile__button-add"),q=y.querySelector(".profile__name"),h=y.querySelector(".profile__description"),E=document.querySelector(".popup-edit"),L=E.querySelector(".popup__button-close"),k=E.querySelector(".popup-edit__form-button"),g=document.querySelector(".popup-add"),C=g.querySelector(".popup-add__button-close"),j=document.querySelector(".popup__form-item_link"),x=document.querySelector(".popup__form-item_title"),A=document.querySelector(".popup-images"),T=document.querySelector(".popup-images__button"),M=g.querySelector(".popup-add__form-button"),P=document.forms.formAdd,D=document.forms.formEdit,z=D.querySelector(".popup__form-item_firstname"),F=D.querySelector(".popup__form-item_job");fetch("https://nomoreparties.co/v1/"+"".concat(f)+"/users/me",{method:"GET",headers:{authorization:_,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){q.textContent=e.name,h.textContent=e.about})).catch((function(e){console.error(e)})),fetch("https://nomoreparties.co/v1/"+"".concat(f)+"/cards",{method:"GET",headers:{authorization:_,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){e.reverse().forEach((function(e){p(v,d(e.link,e.name,e.likes,e._id))}))})).catch((function(e){console.error(e)})),P.addEventListener("submit",(function(e){var t,o;e.preventDefault(),t=x.value,o=j.value,fetch("https://nomoreparties.co/v1/"+"".concat(f)+"/cards",{method:"POST",headers:{authorization:_,"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(t),link:"".concat(o)})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})),p(v,d(j.value,x.value)),n(g)})),D.addEventListener("submit",(function(e){var t,o;e.preventDefault(),t=z.value,o=F.value,fetch("https://nomoreparties.co/v1/"+"".concat(f)+"/users/me",{method:"PATCH",headers:{authorization:_,"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(t),about:"".concat(o)})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})),q.textContent=z.value,h.textContent=F.value,n(E)})),C.addEventListener("click",(function(){n(g)})),L.addEventListener("click",(function(){n(E)})),T.addEventListener("click",(function(){n(A)})),S.addEventListener("click",(function(){z.value=q.textContent,F.value=h.textContent,r(E),o(!1,k)})),b.addEventListener("click",(function(){x.value="",j.value="",r(g),o(!1,M)})),m={inputError:".popup__form-item_active",inputErrorMessage:".popup__form-error",inputForm:".form__input",documentForm:".form",buttonSubmit:".popup__form-button",buttonDisabled:"buttons_disabled"},Array.from(document.querySelectorAll(m.documentForm)).forEach((function(o){!function(o,n){var r=Array.from(o.querySelectorAll(n.inputForm)),c=o.querySelector(n.buttonSubmit);r.forEach((function(u){u.addEventListener("input",(function(){!function(t,o,n){o.validity.valid?function(e,t,o){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(o.inputError),n.textContent="",n.classList.remove(o.inputErrorMessage)}(t,o,n):e(t,o,o.validationMessage,n),o.validity.patternMismatch?(e(t,o,o.validationMessage,n),o.setCustomValidity(o.dataset.errorMessage)):o.setCustomValidity("")}(o,u,n),t(r,c,n)}))}))}(o,m)}))})();